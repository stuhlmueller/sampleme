<template name="trackerTree">
  {{addFullnames branches}}
  <ul>
    {{#each branches}}
        {{>branch}}
    {{/each}}
  </ul>
</template>

<template name="branch">
  <button name={{name}} onclick="$('#{{fullname}}').show()">{{name}}</button>
  {{! todo: move initial hiding into css}}
  <div class="subpane" id={{fullname}} style="display:none">
    {{#if branches.length}}
      {{extendBranchFullNames branches}}
      {{#each branches}}
        {{>branch}}
      {{/each}}
    {{else}}
      {{>inputs}}
    {{/if}}
  </div>
</template>

<template name="inputs">
  {{extendInputFullNames inputs}}
  <form role="form">
    {{#each inputs}}
      input: {{fullname}}
      <input id={{fullname}} name={{fullname}} />
    {{/each}}
    <input type="submit" />
    {{! todo: handle submit. get all inputs from the template, meteor insert, clear inputs and hide the divs}}
  </form>
</template>
